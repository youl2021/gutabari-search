import streamlit as st
import pandas as pd

# â”€â”€ 1) ë¹„ë°€ë²ˆí˜¸ ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PASSWORD = "9999"                       # ì›í•  ë•Œ ë°”ê¿” ì£¼ì„¸ìš”

if "auth" not in st.session_state:      # ì„¸ì…˜ì— ë¡œê·¸ì¸ ì—¬ë¶€ ì €ì¥
    st.session_state["auth"] = False

if not st.session_state["auth"]:
    st.title("ğŸ”’ êµ¬íƒ€ë°”ë¦¬ ì‘í’ˆì„ ì •â€¯(ë³´ì•ˆì ‘ì†)")
    pwd = st.text_input("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”", type="password")
    if pwd == PASSWORD:
        st.session_state["auth"] = True
        st.experimental_rerun()         # â†©Â ê²€ìƒ‰ê¸° í™”ë©´ìœ¼ë¡œ ì „í™˜
    elif pwd:                           # ë­”ê°€ ì…ë ¥í–ˆê³  í‹€ë ¸ì„ ë•Œ
        st.warning("ì ‘ê·¼í•˜ë ¤ë©´ ì˜¬ë°”ë¥¸ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.")
    st.stop()                           # ì—¬ê¸°ì„œ ì½”ë“œ ì¢…ë£Œ

# â”€â”€ 2) ê²€ìƒ‰ê¸° ë³¸ë¬¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.title("ğŸ¬ êµ¬íƒ€ë°”ë¦¬ ì‘í’ˆì„ ì • ê²€ìƒ‰ê¸°")

df = pd.read_excel("êµ¬íƒ€ë°”ë¦¬_ì‘í’ˆì„ ì •.xlsx")      # ì—‘ì…€ì€ ê°™ì€ í´ë”

query = st.text_input("ì˜í™” ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”")

if query:
    result = df[df['ì˜í™”ëª…'].str.contains(query, case=False, na=False)]

    if not result.empty:
        st.markdown("### âœ… ê²€ìƒ‰ ê²°ê³¼:")
        for _, row in result.iterrows():          # í…ìŠ¤íŠ¸ í˜•íƒœë¡œ ê¹”ë” ì¶œë ¥
            st.markdown(
f"""
---
ğŸ¬ **ì˜í™”ì œëª©**Â Â :Â {row['ì˜í™”ëª…']}  
ğŸ“ **ë¶„ì•¼**Â Â Â Â Â :Â {row['ë¶„ì•¼']}  
ğŸ **ì¥ë¥´**Â Â Â Â Â :Â {row['ì¥ë¥´']}  
ğŸ›  **ì œì‘ë…„ë„**Â :Â {row['ì œì‘ì—°ë„']}Â Â Â /Â Â Â **ì œì‘êµ­ê°€**Â :Â {row['ì œì‘êµ­ê°€']}  
ğŸŒ **ì˜í™”ëª…(ì˜ë¬¸)**Â :Â {row['ì˜í™”ëª…(ì˜ë¬¸)']}
"""
            )
    else:
        st.markdown("### ì! **ë“œê°€ì~** ğŸ˜")
